{% extends './Navbar/Navbar.twig' %}

{% block content %}
    <div class="max-w-7xl mx-auto p-8 space-y-10">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="text-center">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">–í–∑–∞–∏–º–æ—Ä–∞—Å—á–µ—Ç–æ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä–∞</h1>
            <p class="text-gray-500 text-sm mb-2">{{ manager }}</p>
            <div class="flex flex-col md:flex-row md:items-center gap-4 p-4 mb-5">
                <!-- –î–∞—Ç–∞ "–¥–æ" -->
                <div class="flex items-center w-full md:w-auto gap-2">
                    <span class="text-sm font-medium text-emerald-600">–î–∞—Ç–∞-</span>
                    <input type="text"
                           id="datepicker_to"
                           placeholder="–î–∞—Ç–∞"
                           autocomplete="off"
                           class="w-full md:w-[12rem] h-[44px] px-3 bg-white border border-emerald-600 rounded-lg shadow-sm text-sm font-medium text-gray-700 uppercase focus:outline-none focus:ring-2 focus:ring-emerald-600 focus:border-emerald-600 transition"/>
                </div>
                <!-- –ö–Ω–æ–ø–∫–∞ "–ò—Å–∫–∞—Ç—å" -->
                <div class="w-full md:w-auto">
                    <button id="searchFilters" type="submit"
                            class="w-full md:w-auto h-[44px] px-6 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-semibold rounded-lg shadow-sm transition">
                        –ü–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º
                    </button>
                </div>
            </div>
        </div>

        <!-- –†–∞–∑–¥–µ–ª: –¢—Ä–∞–Ω–∑–∏—Ç (–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —É—Å–ª—É–≥–∏) -->
        {% if transactions is not empty %}
            <div class="bg-white shadow-sm rounded-2xl p-4 sm:p-6 border border-gray-100 mt-8">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6">
                    –¢—Ä–∞–Ω–∑–∏—Ç <span class="text-gray-500 text-base sm:text-lg">(–∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —É—Å–ª—É–≥–∏)</span>
                </h2>

                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–µ–º—ã —Ç–∞–±–ª–∏—Ü—ã -->
                <div class="text-center text-sm font-semibold text-gray-700">
                    –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —É—Å–ª—É–≥–∏ {{ date ?? '--.--.----' }}
                    <div class="mx-auto w-1/2 border-t border-gray-300 mt-7 mb-7"></div>
                </div>


                <div class="overflow-x-auto">
                    <table class="min-w-full text-xs sm:text-sm text-left border-t border-gray-200 table-auto">
                        <thead class="bg-gray-50 text-gray-700">
                        <tr class="border-b">
                            <th class="py-2 px-2 sm:px-4 font-medium">–î–∞—Ç–∞</th>
                            <th class="py-2 px-2 sm:px-4 font-medium">–ö–æ–º–ø–∞–Ω–∏—è</th>
                            <th class="py-2 px-2 sm:px-4 font-medium w-72 sm:w-80 break-words">–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ</th>
                            <th class="py-2 px-2 sm:px-4 font-medium w-28 sm:w-36 text-right hidden sm:table-cell">–°—É–º–º–∞
                                (‚ÇΩ)
                            </th>
                        </tr>
                        </thead>

                        <tbody class="text-gray-700">
                        {% for item in transactions %}
                            <tr class="hover:bg-gray-50 transition align-top flex flex-col sm:table-row mb-2 sm:mb-0">
                                <td class="py-2 px-2 sm:px-4">{{ item.date|date('d.m.Y') }}</td>
                                <td class="py-2 px-2 sm:px-4">{{ item.sender_company_name }}</td>
                                <td class="py-2 px-2 sm:px-4 w-72 sm:w-80 break-words">{{ item.description }}</td>
                                <td class="py-2 px-2 sm:px-4 font-semibold text-green-600 text-right sm:text-right">
                                    {{ item.transaction_amount|number_format(0, ',', ' ') }} ‚ÇΩ
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>

                    <!-- –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã: –ø–µ—Ä—Å–∏–∫–æ–≤—ã–π –±–ª–æ–∫ —Å –∏—Ç–æ–≥–∞–º–∏ -->
                    <div class="bg-[#FFE5B4] border border-amber-200 border-t-0 rounded-b-2xl shadow-sm p-6 -mt-1">
                        <div class="space-y-3">
                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–°—É–º–º–∞ –≤—Å–µ–≥–æ –ë/–ù, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞—à–ª–æ –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.customer_service_manager }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–î–æ–ª–≥ –≤ –ë/–ù –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏–π (—Å –ø—Ä–æ—à–ª–æ–≥–æ –¥–Ω—è)</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.debt_client_services }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–ë—ã–ª–∏ –≤–æ–∑–≤—Ä–∞—Ç—ã —Å–æ —Å—á—ë—Ç–∞ –∫–æ–º–ø–∞–Ω–∏–∏</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.shipping_return_sum }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–û—Å—Ç–∞—Ç–æ–∫ —Ç—Ä–∞–Ω–∑–∏—Ç–Ω—ã—Ö –¥–µ–Ω–µ–≥ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –≤—ã—á–µ—Ç–æ–≤</span>
                                <span class="text-red-600 font-semibold">{{ today_report.transit_balance_after_deductions }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–ö–æ–º–∏—Å—Å–∏—è –∑–∞ —É—Å–ª—É–≥—É</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.transactions_percents }}</span>
                            </div>

                            <div class="flex justify-between items-center">
                                <span class="text-gray-800 font-medium">–°—É–º–º–∞ –∫ –æ—Ç–≥—Ä—É–∑–∫–µ (—Å —É—á—ë—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–∏)</span>
                                <span class="text-red-600 font-semibold">{{ today_report.net_shipment_amount }} ‚ÇΩ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="bg-white shadow-sm rounded-2xl p-4 sm:p-6 border border-gray-100 mt-8">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6">
                    –¢—Ä–∞–Ω–∑–∏—Ç <span class="text-gray-500 text-base sm:text-lg">(–∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —É—Å–ª—É–≥–∏)</span>
                </h2>

                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–µ–º—ã —Ç–∞–±–ª–∏—Ü—ã -->
                <div class="text-center text-sm font-semibold text-gray-700">
                    –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —É—Å–ª—É–≥–∏ {{ date ?? '--.--.----' }}
                    <div class="mx-auto w-1/2 border-t border-gray-300 mt-7 mb-7"></div>
                </div>

                <div class="overflow-x-auto">
                    <!-- –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã: –ø–µ—Ä—Å–∏–∫–æ–≤—ã–π –±–ª–æ–∫ —Å –∏—Ç–æ–≥–∞–º–∏ -->
                    <div class="bg-[#FFE5B4] border border-amber-200 border-t-0 rounded-b-2xl shadow-sm p-6 -mt-1">
                        <div class="space-y-3">
                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–°—É–º–º–∞ –≤—Å–µ–≥–æ –ë/–ù, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞—à–ª–æ –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.customer_service_manager }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–î–æ–ª–≥ –≤ –ë/–ù –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏–π (—Å –ø—Ä–æ—à–ª–æ–≥–æ –¥–Ω—è)</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.debt_client_services }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–ë—ã–ª–∏ –≤–æ–∑–≤—Ä–∞—Ç—ã —Å–æ —Å—á—ë—Ç–∞ –∫–æ–º–ø–∞–Ω–∏–∏</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.shipping_return_sum }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–û—Å—Ç–∞—Ç–æ–∫ —Ç—Ä–∞–Ω–∑–∏—Ç–Ω—ã—Ö –¥–µ–Ω–µ–≥ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –≤—ã—á–µ—Ç–æ–≤</span>
                                <span class="text-red-600 font-semibold">{{ today_report.transit_balance_after_deductions }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–ö–æ–º–∏—Å—Å–∏—è –∑–∞ —É—Å–ª—É–≥—É</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.transactions_percents }}</span>
                            </div>

                            <div class="flex justify-between items-center">
                                <span class="text-gray-800 font-medium">–°—É–º–º–∞ –∫ –æ—Ç–≥—Ä—É–∑–∫–µ (—Å —É—á—ë—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–∏)</span>
                                <span class="text-red-600 font-semibold">{{ today_report.net_shipment_amount }} ‚ÇΩ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}

        <!-- –†–∞–∑–¥–µ–ª: –û—Ç–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ -->
        {% if manager_finances is not empty %}
            <div class="bg-white shadow-sm rounded-2xl p-4 sm:p-6 border border-gray-100 mt-8">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6">
                    –û—Ç–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
                </h2>

                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–µ–º—ã —Ç–∞–±–ª–∏—Ü—ã -->
                <div class="text-center text-sm font-semibold text-gray-700">
                    –û—Ç–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É {{ date ?? '--.--.----' }}
                    <div class="mx-auto w-1/2 border-t border-gray-300 mt-7 mb-7"></div>
                </div>

                <div class="overflow-x-auto">
                    <table class="min-w-full text-xs sm:text-sm text-left border-t border-gray-200 table-auto">
                        <thead class="bg-gray-50 text-gray-700">
                        <tr class="border-b">
                            <th class="py-2 px-2 sm:px-4 font-medium">–î–∞—Ç–∞ –æ—Ç–≥—Ä—É–∑–∫–∏</th>
                            <th class="py-2 px-2 sm:px-4 font-medium">–ö–æ–º–ø–∞–Ω–∏—è</th>
                            <th class="py-2 px-2 sm:px-4 font-medium w-72 sm:w-80 break-words">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</th>
                            <th class="py-2 px-2 sm:px-4 font-medium w-28 sm:w-36 text-right hidden sm:table-cell">–°—É–º–º–∞
                                (‚ÇΩ)
                            </th>
                        </tr>
                        </thead>

                        <tbody class="text-gray-700">
                        {% for item in manager_finances %}
                            <tr class="hover:bg-gray-50 transition align-top flex flex-col sm:table-row mb-2 sm:mb-0">
                                <td class="py-2 px-2 sm:px-4">{{ item.date|date('d.m.Y') }}</td>
                                <td class="py-2 px-2 sm:px-4">{{ item.company_name ?? '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' }}</td>
                                <td class="py-2 px-2 sm:px-4 w-72 sm:w-80 break-words">{{ item.comments }}</td>
                                <td class="py-2 px-2 sm:px-4 font-semibold text-green-600 text-right sm:text-right">
                                    {{ item.amount|number_format(0, ',', ' ') }} ‚ÇΩ
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <!-- –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä—Å–∏–∫–æ–≤—ã–π –±–ª–æ–∫ -->
                    <div class="bg-[#FFE5B4] border border-amber-200 border-t-0 rounded-b-2xl shadow-sm p-6 -mt-1">
                        <div class="space-y-3">
                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–°—É–º–º–∞ –æ—Ç–≥—Ä—É–∑–∫–∏</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.shipping_manager_sum }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–í–æ–∑–≤—Ä–∞—Ç (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –≤—ã–±–æ—Ä —Å–∫–ª–∞–¥–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –≤–µ—Ä–Ω—É–ª–∏)</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.return_to_warehouse }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–î–æ–ª–≥ –ø–æ –æ—Ç–≥—Ä—É–∑–∫–µ –∑–∞ –ø—Ä–æ—à–ª—ã–π –¥–µ–Ω—å (‚Ññ3 —Å—Ü–µ–Ω–∞—Ä–∏–π)</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.scenario_3 }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–ù–∞—à –¥–æ–ª–≥ –ø–µ—Ä–µ–¥ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –≤ –ë/–ù</span>
                                <span class="text-red-600 font-semibold">{{ today_report.noncash_manager_debt }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center">
                                <span class="text-gray-800 font-medium">–ú–µ–Ω–µ–¥–∂–µ—Ä –æ—Ç–≥—Ä—É–∑–∏–ª —Ç–æ–≤–∞—Ä –≤ –¥–æ–ª–≥</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.debt_goods_shipped }} ‚ÇΩ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="bg-white shadow-sm rounded-2xl p-4 sm:p-6 border border-gray-100 mt-8">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6">
                    –û—Ç–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
                </h2>

                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–µ–º—ã —Ç–∞–±–ª–∏—Ü—ã -->
                <div class="text-center text-sm font-semibold text-gray-700">
                    –û—Ç–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É {{ date ?? '--.--.----' }}
                    <div class="mx-auto w-1/2 border-t border-gray-300 mt-7 mb-7"></div>
                </div>

                <div class="overflow-x-auto">
                    <!-- –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä—Å–∏–∫–æ–≤—ã–π –±–ª–æ–∫ -->
                    <div class="bg-[#FFE5B4] border border-amber-200 border-t-0 rounded-b-2xl shadow-sm p-6 -mt-1">
                        <div class="space-y-3">
                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–°—É–º–º–∞ –æ—Ç–≥—Ä—É–∑–∫–∏</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.shipping_manager_sum }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–í–æ–∑–≤—Ä–∞—Ç (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –≤—ã–±–æ—Ä —Å–∫–ª–∞–¥–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –≤–µ—Ä–Ω—É–ª–∏)</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.return_to_warehouse }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–î–æ–ª–≥ –ø–æ –æ—Ç–≥—Ä—É–∑–∫–µ –∑–∞ –ø—Ä–æ—à–ª—ã–π –¥–µ–Ω—å (‚Ññ3 —Å—Ü–µ–Ω–∞—Ä–∏–π)</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.scenario_3 }}</span>
                            </div>

                            <div class="flex justify-between items-center border-b border-amber-300 pb-2">
                                <span class="text-gray-800 font-medium">–ù–∞—à –¥–æ–ª–≥ –ø–µ—Ä–µ–¥ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –≤ –ë/–ù</span>
                                <span class="text-red-600 font-semibold">{{ today_report.noncash_manager_debt }} ‚ÇΩ</span>
                            </div>

                            <div class="flex justify-between items-center">
                                <span class="text-gray-800 font-medium">–ú–µ–Ω–µ–¥–∂–µ—Ä –æ—Ç–≥—Ä—É–∑–∏–ª —Ç–æ–≤–∞—Ä –≤ –¥–æ–ª–≥</span>
                                <span class="text-gray-900 font-semibold">{{ today_report.debt_goods_shipped }} ‚ÇΩ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}

        <!-- –†–∞–∑–¥–µ–ª: –û—Ç—á–µ—Ç –æ –∫—ç—à–µ -->
        {% if manager_finances_cash is not empty %}
            <div class="bg-white shadow-sm rounded-2xl p-4 sm:p-6 border border-gray-100 mt-8">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6">
                    –û—Ç–≥—Ä—É–∑–∫–∞ –∫–µ—à–∞
                </h2>

                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–µ–º—ã —Ç–∞–±–ª–∏—Ü—ã -->
                <div class="text-center text-sm font-semibold text-gray-700">
                    –û—Ç–≥—Ä—É–∑–∫–∞ –∫–µ—à–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É {{ date ?? '--.--.----' }}
                    <div class="mx-auto w-1/2 border-t border-gray-300 mt-7 mb-7"></div>
                </div>

                <div class="overflow-x-auto">
                    <table class="min-w-full text-xs sm:text-sm text-left border-t border-gray-200 table-auto">
                        <thead class="bg-gray-50 text-gray-700">
                        <tr class="border-b">
                            <th class="py-2 px-2 sm:px-4 font-medium">–î–∞—Ç–∞ –æ—Ç–≥—Ä—É–∑–∫–∏</th>
                            <th class="py-2 px-2 sm:px-4 font-medium">–ö–æ–º–ø–∞–Ω–∏—è</th>
                            <th class="py-2 px-2 sm:px-4 font-medium w-72 sm:w-80 break-words">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</th>
                            <th class="py-2 px-2 sm:px-4 font-medium w-28 sm:w-36 text-right hidden sm:table-cell">–°—É–º–º–∞
                                (‚ÇΩ)
                            </th>
                        </tr>
                        </thead>

                        <tbody class="text-gray-700">
                        {% for item in manager_finances_cash %}
                            <tr class="hover:bg-gray-50 transition align-top flex flex-col sm:table-row mb-2 sm:mb-0">
                                <td class="py-2 px-2 sm:px-4">{{ item.date|date('d.m.Y') }}</td>
                                <td class="py-2 px-2 sm:px-4">{{ item.company_name ?? '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' }}</td>
                                <td class="py-2 px-2 sm:px-4 w-72 sm:w-80 break-words">{{ item.comments }}</td>
                                <td class="py-2 px-2 sm:px-4 font-semibold text-green-600 text-right sm:text-right">
                                    {{ item.amount|number_format(0, ',', ' ') }} ‚ÇΩ
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <div class="bg-[#FFE5B4] border border-amber-200 border-t-0 rounded-b-2xl shadow-sm p-6 -mt-1">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-800 font-medium">–í—Å–µ–≥–æ –≤—ã–¥–∞–Ω–æ –∫—ç—à</span>
                            <span class="text-gray-900 font-semibold">{{ today_report.total_cash_issued }} ‚ÇΩ</span>
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="bg-white shadow-sm rounded-2xl p-4 sm:p-6 border border-gray-100 mt-8">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6">
                    –û—Ç–≥—Ä—É–∑–∫–∞ –∫–µ—à–∞
                </h2>

                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–µ–º—ã —Ç–∞–±–ª–∏—Ü—ã -->
                <div class="text-center text-sm font-semibold text-gray-700">
                    –û—Ç–≥—Ä—É–∑–∫–∞ –∫–µ—à–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É {{ date ?? '--.--.----' }}
                    <div class="mx-auto w-1/2 border-t border-gray-300 mt-7 mb-7"></div>
                </div>

                <div class="overflow-x-auto">
                    <div class="bg-[#FFE5B4] border border-amber-200 border-t-0 rounded-b-2xl shadow-sm p-6 -mt-1">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-800 font-medium">–í—Å–µ–≥–æ –≤—ã–¥–∞–Ω–æ –∫—ç—à</span>
                            <span class="text-gray-900 font-semibold">{{ today_report.total_cash_issued }} ‚ÇΩ</span>
                        </div>
                    </div>
                </div>
            </div>

        {% endif %}

        <div class="shadow-sm rounded-2xl overflow-hidden border border-gray-200">
            {% set keys = today_report.scenario|keys %}
            {% set last_key = keys|last %}

            <!-- –í–µ—Ä—Ö–Ω—è—è —Å—Ç—Ä–æ–∫–∞: —Ç–µ–º–∞, –∂–µ–ª—Ç–∞—è, —Ç–æ–Ω–∫–∏–π —Ç–µ–∫—Å—Ç -->
            <div class="bg-yellow-300 text-gray-800 px-6 py-4">
                ‚Ññ{{ today_report.scenario.scenario }} –°–¶–ï–ù–ê–†–ò–ô ‚Äî {{ today_report.scenario.topic }}
            </div>

            <div class="space-y-1">
                {% for key, value in today_report.scenario %}
                    {% if key != 'scenario' and key != 'topic' %}
                        <div class="{% if key == last_key %}bg-blue-500 text-white{% else %}bg-blue-100 text-gray-800{% endif %} flex justify-between px-6 py-2">
                            <span class="">{{ key|capitalize }}</span>
                            <span class="">{{ value }} ‚ÇΩ</span>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="flex items-center justify-center py-6">
        {% include './Pagination/Pagination.twig' %}
    </div>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pikaday/css/pikaday.css">
    <script src="https://cdn.jsdelivr.net/npm/pikaday/pikaday.js"></script>

    <script>
        function showCornerModal(message) {
            const checkbox = document.getElementById('notifications');
            const txtModal = document.getElementById('notifications-txt');
            checkbox.checked = true;
            txtModal.innerHTML = message;

            setTimeout(() => {
                checkbox.checked = false;
            }, 5000);
        }

        const pickerTo = new Pikaday({
            field: document.getElementById('datepicker_to'),
            format: 'DD.MM.YYYY',
            maxDate: new Date(), // üëà –∑–∞–ø—Ä–µ—â–∞–µ–º –≤—ã–±–æ—Ä –±—É–¥—É—â–∏—Ö –¥–∞—Ç
            firstDay: 1,
            i18n: {
                previousMonth: '–ü—Ä–µ–¥—ã–¥—É—â–∏–π',
                nextMonth: '–°–ª–µ–¥—É—é—â–∏–π',
                months: [
                    '–Ø–Ω–≤–∞—Ä—å', '–§–µ–≤—Ä–∞–ª—å', '–ú–∞—Ä—Ç', '–ê–ø—Ä–µ–ª—å', '–ú–∞–π', '–ò—é–Ω—å',
                    '–ò—é–ª—å', '–ê–≤–≥—É—Å—Ç', '–°–µ–Ω—Ç—è–±—Ä—å', '–û–∫—Ç—è–±—Ä—å', '–ù–æ—è–±—Ä—å', '–î–µ–∫–∞–±—Ä—å'
                ],
                weekdays: [
                    '–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞',
                    '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞'
                ],
                weekdaysShort: ['–í—Å', '–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±']
            },
            toString(date, format) {
                const day = String(date.getDate()).padStart(2, '0');
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const year = date.getFullYear();
                return `${day}.${month}.${year}`;
            },
            parse(dateString, format) {
                const parts = dateString.split('.');
                const day = parseInt(parts[0], 10);
                const month = parseInt(parts[1], 10) - 1;
                const year = parseInt(parts[2], 10);
                return new Date(year, month, day);
            }
        });

        document.getElementById('searchFilters').addEventListener('click', () => {
            const dateTo = document.getElementById('datepicker_to');

            if (!dateTo.value) {
                showCornerModal('–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä');
                return;
            }


            // –ë–µ—Ä—ë–º —Ç–µ–∫—É—â–∏–π URL –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
            const currentUrl = new URL(window.location.href);
            const params = new URLSearchParams(currentUrl.search);

            if (dateTo.value) params.set('date', dateTo.value);

            // –ü–µ—Ä–µ—Ö–æ–¥ —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
            window.location.href = `${currentUrl.origin}${currentUrl.pathname}?${params.toString()}`;
        });
    </script>
{% endblock %}
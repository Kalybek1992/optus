# üìò –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

## üìç –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ ‚Äî `index.php`

### **–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π**

```php
ConfigManager::loadConfigs(dirname(__DIR__));
```

–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ `.conf` –≤ `\app\config\config.conf`. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ **–æ–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É**, –∏–Ω–∞—á–µ –∑–Ω–∞—á–µ–Ω–∏—è –±—É–¥—É—Ç —Å–±—Ä–æ—à–µ–Ω—ã.

---

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞**

```php
$request = new Request();
```

–°–æ–±–∏—Ä–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:

* cookies
* –º–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞
* —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
* —á–∏—Å—Ç—ã–π URL

---

### **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**

```php
$router = new AppRouter();
$response_array = $router->route($request);
```

–†–æ—É—Ç—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ:

```
\app\resources\routes\app.php
```

–¢–∞–º –∂–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –∏ middleware.

#### **–ü—Ä–∏–º–µ—Ä —Ä–æ—É—Ç–µ—Ä–∞**

```php
'/user/getadministrators' => [
    'validation' => [
        'user_id' => [
            'required' => true,
            'custom_logic' => fn($a) => is_numeric($a) && $a > 0,
        ],
    ],
    'middlewares' => [
        new ApiKeyAdminMiddleware,
    ],
],
```

> ‚ö† URL –≤—Å–µ–≥–¥–∞ –Ω–∏–∂–Ω–∏–º —Ä–µ–≥–∏—Å—Ç—Ä–æ–º (`/user/bindaccountclientservices`).

#### **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**

* `required` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
* `custom_logic` ‚Äî –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏
* `regex` ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

–ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä **–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω**:

```php
'custom_logic' => fn($a) => is_numeric($a) && $a > 0 ?? null
```

---

### **–†–∞–±–æ—Ç–∞ —Å DataContainer**

```php
DataContainer::set('home_page_role', $home_page_role);
InformationDC::set('user', $user_arr);
```

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∏—Ö –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:

```php
$auth_token = RequestDC::get('auth_token');
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### **`\app\source\Base`**

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –±–∏–ª–¥–µ—Ä—ã. –°—é–¥–∞ —Å—Ç–æ–∏—Ç –ª–µ–∑—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.

### **`\app\source\Project`**

–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

#### **–ü–æ–¥–ø–∞–ø–∫–∏:**

| –ü–∞–ø–∫–∞                              | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                               |
| ---------------------------------- | -------------------------------------------------------- |
| `Connectors`                       | –ö–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã –∏ –∏—Ö –∏–º–µ–Ω–∞                                    |
| `Controllers`                      | –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã. –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è `Controller`  |
| `Controllers/Base`                 | –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Twig                |
| `DataContainers`                   | –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –º–∞–ø–ø–µ—Ä—ã, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã                      |
| `HtmlTemplates`                    | –®–∞–±–ª–æ–Ω—ã Twig                                             |
| `LogicManagers`                    | –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è                                        |
| `LogicPdoModel`                    | SQL –∑–∞–ø—Ä–æ—Å—ã, —Ä–∞–±–æ—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏                          |
| `Middlewares/VariablesMiddlewares` | Middleware –¥–ª—è —Ä–æ—É—Ç–µ—Ä–∞                                   |
| `Models`                           | –ú–æ–¥–µ–ª–∏ —Ç–∞–±–ª–∏—Ü –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö                                |
| `Requests`                         | –§–∞–π–ª—ã —Ä–∞–±–æ—Ç—ã —Å API, —á–∞—â–µ –¥–ª—è Telegram –∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ |
| `Tg`                               | –°–∞–º–æ–ø–∏—Å–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Telegram –±–æ—Ç–æ–≤                  |

---

## üóÑ –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (Builder)

### **–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å SQL-–∑–∞–ø—Ä–æ—Å**

```php
$builder->build();
```

–ü—Ä–∏–º–µ—Ä –æ–∂–∏–¥–∞–µ–º–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

```
(SELECT COUNT(client_services.id) as count FROM client_services;)
```

---

### **INSERT**

```php
$builder = Clients::newQueryBuilder()
    ->insert([
        'column_name' => 'value',
    ]);
```

### **UPDATE**

```php
$builder = Debts::newQueryBuilder()
    ->update([
        'amount = 500',
        'interest_income = 300',
        'status = pending',
    ])
    ->where([
        'from_account_id = ' . $legal_id,
    ]);
```

### **DELETE**

```php
$builder = Couriers::newQueryBuilder()
    ->delete()
    ->where([
        'id = ' . $courier_id,
    ]);
```

### **SELECT**

```php
$builder = Couriers::newQueryBuilder()
    ->select([
        '*',
        'u.name as username',
    ])
    ->leftJoin('users u')
    ->on([
        'u.id = user_id',
    ])
    ->orderBy('u.created_at', 'DESC');
```

### **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞**

```php
$data = PdoConnector::execute($builder);
```

–î–∞–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º –æ–±—ä–µ–∫—Ç–æ–≤:

```php
$data[0]->id;
```

---

## üßµ Telegram (—Å–∞–º–æ–ø–∏—Å–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫)

–ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤:

```
\app\source\Project\Tg
```

–ü–æ–∑–≤–æ–ª—è–µ—Ç:

* —Ä–∞–±–æ—Ç–∞—Ç—å —Å Telegram API
* —Å—Ç—Ä–æ–∏—Ç—å —Ü–µ–ø–æ—á–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
* –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ö—ç–Ω–¥–ª–µ—Ä—ã

*(–±—É–¥–µ—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å—Å—è)*

---

## üìÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

* –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã ‚Üí –≤—Å–µ–≥–¥–∞ `SomethingController`
* –†–æ—É—Ç—ã ‚Üí **—Ç–æ–ª—å–∫–æ –º–∞–ª–µ–Ω—å–∫–∏–µ –±—É–∫–≤—ã**, –∏–Ω–∞—á–µ –æ—à–∏–±–∫–∏
* DataContainer –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∫—ç—à–∞ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è

---

## üèÅ –ò—Ç–æ–≥

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–æ—É—Ç–µ—Ä, –≤–∞–ª–∏–¥–∞—Ü–∏—é, middleware, builder –¥–ª—è SQL –∏ —Å–∞–º–æ–ø–∏—Å–Ω—ã–π Telegram —Ñ—Ä–µ–π–º–≤–æ—Ä–∫. –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è MVC+–≥–∏–±—Ä–∏–¥–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π.

> –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±—É–¥–µ—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞.
